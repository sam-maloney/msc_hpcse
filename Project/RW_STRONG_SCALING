#!/bin/bash -l
#SBATCH --job-name=RW_STRONG_SCALING
#SBATCH --mail-user=maloneys@student.ethz.ch
#SBATCH --time=24:00:00
#SBATCH --nodes=1
#SBATCH --ntasks-per-core=1
#SBATCH --ntasks-per-node=1
#SBATCH --cpus-per-task=1
#SBATCH --partition=normal
#SBATCH --constraint=gpu
echo Running RW Strong Scaling Simulations
echo  

echo AVX single thread
srun $PROJ/RW_AVX.exe 1 3842 14760964000 0.000000001 10 50

export KMP_AFFINITY=scatter

export OMP_NUM_THREADS=1
echo OMP_NUM_THREADS = $OMP_NUM_THREADS
srun $PROJ/RW_omp.exe 1 3842 14760964000 0.000000001 10 50

export OMP_NUM_THREADS=2
echo OMP_NUM_THREADS = $OMP_NUM_THREADS
srun $PROJ/RW_omp.exe 1 3842 14760964000 0.000000001 10 50

export OMP_NUM_THREADS=4
echo OMP_NUM_THREADS = $OMP_NUM_THREADS
srun $PROJ/RW_omp.exe 1 3842 14760964000 0.000000001 10 50

export OMP_NUM_THREADS=6
echo OMP_NUM_THREADS = $OMP_NUM_THREADS
srun $PROJ/RW_omp.exe 1 3842 14760964000 0.000000001 10 50

export OMP_NUM_THREADS=8
echo OMP_NUM_THREADS = $OMP_NUM_THREADS
srun $PROJ/RW_omp.exe 1 3842 14760964000 0.000000001 10 50

export OMP_NUM_THREADS=10
echo OMP_NUM_THREADS = $OMP_NUM_THREADS
srun $PROJ/RW_omp.exe 1 3842 14760964000 0.000000001 10 50

export OMP_NUM_THREADS=12
echo OMP_NUM_THREADS = $OMP_NUM_THREADS
srun $PROJ/RW_omp.exe 1 3842 14760964000 0.000000001 10 50

export OMP_NUM_THREADS=16
echo OMP_NUM_THREADS = $OMP_NUM_THREADS
srun $PROJ/RW_omp.exe 1 3842 14760964000 0.000000001 10 50

export OMP_NUM_THREADS=20
echo OMP_NUM_THREADS = $OMP_NUM_THREADS
srun $PROJ/RW_omp.exe 1 3842 14760964000 0.000000001 10 50

export OMP_NUM_THREADS=24
echo OMP_NUM_THREADS = $OMP_NUM_THREADS
srun $PROJ/RW_omp.exe 1 3842 14760964000 0.000000001 10 50
